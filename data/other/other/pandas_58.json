{"project": "pandas", "bug": 58, "project_url": "https://github.com/pandas-dev/pandas", "file_changed": "pandas/core/arrays/categorical.py", "buggy_commit_id": "634a41f", "fixed_commit_id": "16684f2affaf901b42a12e50f9c29e7c034ad7ea", "lines_deleted": {"646": "        codes = np.asarray(codes)  # #21767\n"}, "lines_added": {"646": "        if is_extension_array_dtype(codes) and is_integer_dtype(codes):\n", "647": "            # Avoid the implicit conversion of Int to object\n", "648": "            if isna(codes).any():\n", "649": "                raise ValueError(\"codes cannot contain NA values\")\n", "650": "            codes = codes.to_numpy(dtype=np.int64)\n", "651": "        else:\n", "652": "            codes = np.asarray(codes)\n"}}