{"project": "pandas", "bug": 104, "project_url": "https://github.com/pandas-dev/pandas", "file_changed": "pandas/core/groupby/groupby.py", "buggy_commit_id": "f738581", "fixed_commit_id": "8e9b3eee812b70197341c26c40200d8a1a77ed9c", "lines_deleted": {"1939": "            order = np.roll(list(range(result.index.nlevels)), -1)\n", "1940": "            result = result.reorder_levels(order)\n", "1941": "            result = result.reindex(q, level=-1)\n", "1943": "            # fix order.\n", "1944": "            hi = len(q) * self.ngroups\n", "1945": "            arr = np.arange(0, hi, self.ngroups)\n", "1946": "            arrays = []\n", "1948": "            for i in range(self.ngroups):\n", "1949": "                arr2 = arr + i\n", "1950": "                arrays.append(arr2)\n", "1952": "            indices = np.concatenate(arrays)\n", "1953": "            assert len(indices) == len(result)\n"}, "lines_added": {"1939": "            order = list(range(1, result.index.nlevels)) + [0]\n", "1940": "\n", "1941": "            # temporarily saves the index names\n", "1942": "            index_names = np.array(result.index.names)\n", "1944": "            # set index names to positions to avoid confusion\n", "1945": "            result.index.names = np.arange(len(index_names))\n", "1946": "\n", "1947": "            # place quantiles on the inside\n", "1948": "            result = result.reorder_levels(order)\n", "1950": "            # restore the index names in order\n", "1951": "            result.index.names = index_names[order]\n", "1953": "            # reorder rows to keep things sorted\n", "1954": "            indices = np.arange(len(result)).reshape([len(q), self.ngroups]).T.flatten()\n"}}