{"project": "pandas", "bug": 52, "project_url": "https://github.com/pandas-dev/pandas", "file_changed": "pandas/core/groupby/generic.py", "buggy_commit_id": "20a84a5", "fixed_commit_id": "7017599821e02ba95282848c12f7d3b5f2ce670a", "lines_deleted": {"593": "        # GH 27951\n", "594": "        # temporary fix while we wait for NumPy bug 12629 to be fixed\n", "595": "        val[isna(val)] = np.datetime64(\"NaT\")\n", "596": "\n", "597": "        try:\n", "598": "            sorter = np.lexsort((val, ids))\n", "599": "        except TypeError:  # catches object dtypes\n", "600": "            msg = f\"val.dtype must be object, got {val.dtype}\"\n", "601": "            assert val.dtype == object, msg\n", "602": "            val, _ = algorithms.factorize(val, sort=False)\n", "603": "            sorter = np.lexsort((val, ids))\n", "604": "            _isna = lambda a: a == -1\n", "605": "        else:\n", "606": "            _isna = isna\n", "607": "\n", "608": "        ids, val = ids[sorter], val[sorter]\n", "613": "        inc = np.r_[1, val[1:] != val[:-1]]\n", "616": "        mask = _isna(val)\n"}, "lines_added": {"593": "        codes, _ = algorithms.factorize(val, sort=False)\n", "594": "        sorter = np.lexsort((codes, ids))\n", "595": "        codes = codes[sorter]\n", "596": "        ids = ids[sorter]\n", "601": "        inc = np.r_[1, codes[1:] != codes[:-1]]\n", "604": "        mask = codes == -1\n"}}