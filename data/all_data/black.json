{"project": "black", "bug": 2, "project_url": "https://github.com/psf/black", "file_changed": "black.py", "buggy_commit_id": "c8ca6b2b9ff3510bee12129824cebfc2fc51e5b2", "fixed_commit_id": "892eddacd215d685e136686b7f629ade70adca83", "lines_deleted": {"3118": "        is_fmt_on = False\n", "3119": "        for comment in list_comments(container.prefix, is_endmarker=False):\n", "3120": "            if comment.value in FMT_ON:\n", "3121": "                is_fmt_on = True\n", "3122": "            elif comment.value in FMT_OFF:\n", "3123": "                is_fmt_on = False\n", "3124": "        if is_fmt_on:\n", "3127": "        yield container\n", "3129": "        container = container.next_sibling\n"}, "lines_added": {"3118": "        if fmt_on(container):\n", "3121": "        # fix for fmt: on in children\n", "3122": "        if contains_fmt_on_at_column(container, leaf.column):\n", "3123": "            for child in container.children:\n", "3124": "                if contains_fmt_on_at_column(child, leaf.column):\n", "3125": "                    return\n", "3126": "                yield child\n", "3127": "        else:\n", "3128": "            yield container\n", "3129": "            container = container.next_sibling\n", "3130": "\n", "3132": "def fmt_on(container: LN) -> bool:\n", "3133": "    is_fmt_on = False\n", "3134": "    for comment in list_comments(container.prefix, is_endmarker=False):\n", "3135": "        if comment.value in FMT_ON:\n", "3136": "            is_fmt_on = True\n", "3137": "        elif comment.value in FMT_OFF:\n", "3138": "            is_fmt_on = False\n", "3139": "    return is_fmt_on\n", "3140": "\n", "3141": "\n", "3142": "def contains_fmt_on_at_column(container: LN, column: int) -> bool:\n", "3143": "    for child in container.children:\n", "3144": "        if (\n", "3145": "            isinstance(child, Node)\n", "3146": "            and first_leaf_column(child) == column\n", "3147": "            or isinstance(child, Leaf)\n", "3148": "            and child.column == column\n", "3149": "        ):\n", "3150": "            if fmt_on(child):\n", "3151": "                return True\n", "3152": "\n", "3153": "    return False\n", "3154": "\n", "3155": "\n", "3156": "def first_leaf_column(node: Node) -> Optional[int]:\n", "3157": "    for child in node.children:\n", "3158": "        if isinstance(child, Leaf):\n", "3159": "            return child.column\n", "3160": "    return None\n"}}
{"project": "black", "bug": 3, "project_url": "https://github.com/psf/black", "file_changed": "black.py", "buggy_commit_id": "8126b4f6a9342290de4655e6a8a78cd288ce7daa", "fixed_commit_id": "7a14a37981862ef418f3cdb4a7e2375856f97529", "lines_deleted": {"396": "        exists=False, file_okay=True, dir_okay=False, readable=True, allow_dash=False\n"}, "lines_added": {"396": "        exists=True, file_okay=True, dir_okay=False, readable=True, allow_dash=False\n"}}
{"project": "black", "bug": 4, "project_url": "https://github.com/psf/black", "file_changed": "black.py", "buggy_commit_id": "65ea568e3301951f26e0e3b98f6d5dc80132e917", "fixed_commit_id": "c7495b9aa098ef7a358fc74556359d21c6a4ba11", "lines_deleted": {"1482": "        before -= self.previous_after\n"}, "lines_added": {"1482": "        before = (\n", "1483": "            # Black should not insert empty lines at the beginning\n", "1484": "            # of the file\n", "1485": "            0\n", "1486": "            if self.previous_line is None\n", "1487": "            else before - self.previous_after\n", "1488": "        )\n"}}
{"project": "black", "bug": 8, "project_url": "https://github.com/psf/black", "file_changed": "black.py", "buggy_commit_id": "e6ddb68c786256e1cb0c76b42d10c212ef34cb2a", "fixed_commit_id": "6b994fdb8ab70ce4c2eafb8f2f0ff2648f3ff1ef", "lines_deleted": {"2407": "            # Ensure a trailing comma when expected.\n", "2409": "                if leaves[-1].type != token.COMMA:\n", "2410": "                    leaves.append(Leaf(token.COMMA, \",\"))\n"}, "lines_added": {"2407": "            # Ensure a trailing comma for imports, but be careful not to add one after\n", "2408": "            # any comments.\n", "2410": "                for i in range(len(leaves) - 1, -1, -1):\n", "2411": "                    if leaves[i].type == STANDALONE_COMMENT:\n", "2412": "                        continue\n", "2413": "                    elif leaves[i].type == token.COMMA:\n", "2414": "                        break\n", "2415": "                    else:\n", "2416": "                        leaves.insert(i + 1, Leaf(token.COMMA, \",\"))\n", "2417": "                        break\n"}}
{"project": "black", "bug": 9, "project_url": "https://github.com/psf/black", "file_changed": "black.py", "buggy_commit_id": "026c81b83454f176a9f9253cbfb70be2c159d822", "fixed_commit_id": "d6db1c12a8e14833fe22da377cddc2bd1f43dc14", "lines_deleted": {"728": "        # Python 2-compatible code, so don't try Python 3 grammar.\n", "734": "        return [pygram.python_grammar]\n"}, "lines_added": {"728": "        # Python 3-compatible code, so don't try Python 2 grammar\n", "734": "        return [pygram.python_grammar_no_print_statement, pygram.python_grammar]\n"}}
{"project": "black", "bug": 10, "project_url": "https://github.com/psf/black", "file_changed": "blib2to3/pgen2/driver.py", "buggy_commit_id": "f6643c4f0cfbae1f2493fdfce46cfbae3d26f46b", "fixed_commit_id": "66aa676278948368dff251dffd58c850cb8b889e", "lines_deleted": {"133": "            elif char == ' ':\n", "135": "            elif char == '\\t':\n", "136": "                current_column += 4\n"}, "lines_added": {"133": "            elif char in ' \\t':\n"}}
{"project": "black", "bug": 13, "project_url": "https://github.com/psf/black", "file_changed": "blib2to3/pgen2/tokenize.py", "buggy_commit_id": "b719d85ccc330170e40b2617307a7e3b2a0bab14", "fixed_commit_id": "883689366ce0f0e0ddd66d81360c61abfd19b01a", "lines_deleted": {"518": "                    if token == 'def':\n", "523": "                            async_def = True\n", "524": "                            async_def_indent = indents[-1]\n"}, "lines_added": {"518": "                    if token in ('def', 'for'):\n", "523": "                            if token == 'def':\n", "524": "                                async_def = True\n", "525": "                                async_def_indent = indents[-1]\n"}}
{"project": "black", "bug": 16, "project_url": "https://github.com/psf/black", "file_changed": "black.py", "buggy_commit_id": "fb34c9e19589d05f92084a28940837151251ebd6", "fixed_commit_id": "42a3fe53319a8c02858c2a96989ed1339f84515a", "lines_deleted": {"2947": "        normalized_path = \"/\" + child.resolve().relative_to(root).as_posix()\n"}, "lines_added": {"2943": "    Symbolic links pointing outside of the root directory are ignored.\n", "2944": "\n", "2949": "        try:\n", "2950": "            normalized_path = \"/\" + child.resolve().relative_to(root).as_posix()\n", "2951": "        except ValueError:\n", "2952": "            if child.is_symlink():\n", "2953": "                report.path_ignored(\n", "2954": "                    child,\n", "2955": "                    \"is a symbolic link that points outside of the root directory\",\n", "2956": "                )\n", "2957": "                continue\n", "2958": "\n", "2959": "            raise\n", "2960": "\n"}}
{"project": "black", "bug": 19, "project_url": "https://github.com/psf/black", "file_changed": "black.py", "buggy_commit_id": "337a4199f90ca48a19cf26511e0cec330b13bd4e", "fixed_commit_id": "29e97d1d4a7717f1bd0ca35cacf2f2ce6d815b0c", "lines_deleted": {}, "lines_added": {"1046": "            if is_decorator and self.previous_line and self.previous_line.is_comment:\n", "1047": "                # Don't insert empty lines between decorator comments.\n", "1048": "                return 0, 0\n", "1049": "\n"}}
{"project": "black", "bug": 20, "project_url": "https://github.com/psf/black", "file_changed": "black.py", "buggy_commit_id": "2e52a2b3ecc0fe025439c3db05a4457ab14f167b", "fixed_commit_id": "06e95b1e9bcd43c4574840f8174ba4b2c5d281bd", "lines_deleted": {"343": "        src_name = f\"{src.name}  (original)\"\n", "344": "        dst_name = f\"{src.name}  (formatted)\"\n"}, "lines_added": {"343": "        src_name = f\"{src}  (original)\"\n", "344": "        dst_name = f\"{src}  (formatted)\"\n"}}
{"project": "black", "bug": 21, "project_url": "https://github.com/psf/black", "file_changed": "black.py", "buggy_commit_id": "c071af761e1550c6e4ebab8e5af747d2d8fdd48e", "fixed_commit_id": "8e7848c63efe36f09e4651bece8c0efc34a1c3e1", "lines_deleted": {"2327": "        mode=\"w\", prefix=\"blk_\", suffix=\".log\", delete=False\n"}, "lines_added": {"2327": "        mode=\"w\", prefix=\"blk_\", suffix=\".log\", delete=False, encoding=\"utf8\"\n"}}
