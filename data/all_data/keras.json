{"project": "keras", "bug": 2, "project_url": "https://github.com/keras-team/keras", "file_changed": "keras/backend/numpy_backend.py", "buggy_commit_id": "2f55055a9f053b35fa721d3eb75dd07ea5a5f1e3", "fixed_commit_id": "c24d16af155e20976bdf61e468ba760408e676ff", "lines_deleted": {}, "lines_added": {"318": "def in_top_k(predictions, targets, k):\n", "319": "    top_k = np.argsort(-predictions)[:, :k]\n", "320": "    targets = targets.reshape(-1, 1)\n", "321": "    return np.any(targets == top_k, axis=-1)\n", "322": "\n", "323": "\n"}}
{"project": "keras", "bug": 4, "project_url": "https://github.com/keras-team/keras", "file_changed": "keras/optimizers.py", "buggy_commit_id": "b0bfd5201da2bfced84028bcc5bda05bdfd75af7", "fixed_commit_id": "4185cbb50bfcae9cc30b0fc7b67e81d67a50a8ac", "lines_deleted": {"705": "        grads = self.optimizer.compute_gradients(loss, params)\n"}, "lines_added": {"705": "        grads = self.optimizer.compute_gradients(loss, var_list=params)\n"}}
{"project": "keras", "bug": 5, "project_url": "https://github.com/keras-team/keras", "file_changed": "keras/utils/data_utils.py", "buggy_commit_id": "b847b4601d608050bab6eccd049fce28b7bf1b1f", "fixed_commit_id": "e11c48d9ce3ee47bb8a966549b14cbd5b10ee70d", "lines_deleted": {"172": "        cache_dir = os.path.join(os.path.expanduser('~'), '.keras')\n"}, "lines_added": {"172": "        if 'KERAS_HOME' in os.environ:\n", "173": "            cache_dir = os.environ.get('KERAS_HOME')\n", "174": "        else:\n", "175": "            cache_dir = os.path.join(os.path.expanduser('~'), '.keras')\n"}}
{"project": "keras", "bug": 6, "project_url": "https://github.com/keras-team/keras", "file_changed": "keras/engine/training_utils.py", "buggy_commit_id": "88af7d0c97497b5c3a198ee9416b2accfbc72c36", "fixed_commit_id": "4b54657ab4806b0aaef8f8eeb973edb83c3d3483", "lines_deleted": {"412": "            score_array /= K.mean(mask)\n"}, "lines_added": {"412": "            score_array /= K.mean(mask) + K.epsilon()\n"}}
{"project": "keras", "bug": 7, "project_url": "https://github.com/keras-team/keras", "file_changed": "keras/wrappers/scikit_learn.py", "buggy_commit_id": "26b620fb37c885d60183f83abc744f43775ce75a", "fixed_commit_id": "c05ef1fd95a6024155ab59656fef8dac5a45c335", "lines_deleted": {"322": "        return np.squeeze(self.model.predict(x, **kwargs))\n"}, "lines_added": {"322": "        return np.squeeze(self.model.predict(x, **kwargs), axis=-1)\n"}}
{"project": "keras", "bug": 9, "project_url": "https://github.com/keras-team/keras", "file_changed": "docs/autogen.py", "buggy_commit_id": "0cd3b07eb5de1aaaad84d1ff7f7c2ed7dab4b23c", "fixed_commit_id": "0505393746d56ddacc34bb1c016dba79429c9ac9", "lines_deleted": {"119": "    block = docstring[starting_point:(None if ending_point == -1 else\n", "120": "                                      ending_point - 1)]\n"}, "lines_added": {"119": "    block = docstring[starting_point:(ending_point - 1 if ending_point > -1 else\n", "120": "                                      section_end)]\n"}}
{"project": "keras", "bug": 13, "project_url": "https://github.com/keras-team/keras", "file_changed": "keras/engine/training_generator.py", "buggy_commit_id": "2bfd1f2c950df5fc3f40b903c1966f1b0a48bee4", "fixed_commit_id": "a07253d8269e1b750f0a64767cc9a07da8a3b7ea", "lines_deleted": {"126": "                    val_enqueuer_gen = iter_sequence_infinite(generator)\n"}, "lines_added": {"126": "                    val_enqueuer_gen = iter_sequence_infinite(val_data)\n", "127": "                    validation_steps = validation_steps or len(val_data)\n"}}
{"project": "keras", "bug": 14, "project_url": "https://github.com/keras-team/keras", "file_changed": "keras/metrics.py", "buggy_commit_id": "98465b85d020f1326bcef7632f1261a9a7a84e92", "fixed_commit_id": "02bc5010a04bb11c8e91835cc9775c8149dec754", "lines_deleted": {"47": "    return K.mean(K.in_top_k(y_pred, K.cast(K.max(y_true, axis=-1), 'int32'), k),\n"}, "lines_added": {"47": "    # If the shape of y_true is (num_samples, 1), flatten to (num_samples,)\n", "48": "    return K.mean(K.in_top_k(y_pred, K.cast(K.flatten(y_true), 'int32'), k),\n"}}
{"project": "keras", "bug": 17, "project_url": "https://github.com/keras-team/keras", "file_changed": "keras/metrics.py", "buggy_commit_id": "c913b6da92f6ab9a3f4c897caa4085e782a14680", "fixed_commit_id": "5a6af4bc6d44e9adbc2a21804bfcd18c4ce849ef", "lines_deleted": {"36": "    return K.cast(K.equal(K.max(y_true, axis=-1),\n"}, "lines_added": {"36": "    # flatten y_true in case it's in shape (num_samples, 1) instead of (num_samples,)\n", "37": "    return K.cast(K.equal(K.flatten(y_true),\n"}}
{"project": "keras", "bug": 22, "project_url": "https://github.com/keras-team/keras", "file_changed": "keras/engine/input_layer.py", "buggy_commit_id": "54386efa549f850dff13f79fc3af67799a4e5d4f", "fixed_commit_id": "ee02d256611b17d11e37b86bd4f618d7f2a37d84", "lines_deleted": {}, "lines_added": {"44": "        self.supports_masking = True\n"}}
{"project": "keras", "bug": 23, "project_url": "https://github.com/keras-team/keras", "file_changed": "keras/engine/sequential.py", "buggy_commit_id": "3dcd9c767ce6875fc8b69c74971ac8a552e23131", "fixed_commit_id": "69c30a150f0b2caee7961ca1c0080960ef5ad6f6", "lines_deleted": {"151": "                    batch_shape = first_layer.batch_input_shape\n", "152": "                    dtype = first_layer.dtype\n"}, "lines_added": {}}
{"project": "keras", "bug": 24, "project_url": "https://github.com/keras-team/keras", "file_changed": "keras/callbacks.py", "buggy_commit_id": "d7884570b10951d156aa086ee29a4df9eab79cf3", "fixed_commit_id": "bcf0031b54d555179be81c088cc3df0a723d7907", "lines_deleted": {"788": "                    tf.summary.histogram('{}_out'.format(layer.name),\n", "789": "                                         layer.output)\n"}, "lines_added": {"788": "                    if isinstance(layer.output, list):\n", "789": "                        for i, output in enumerate(layer.output):\n", "790": "                            tf.summary.histogram('{}_out_{}'.format(layer.name, i), output)\n", "791": "                    else:\n", "792": "                        tf.summary.histogram('{}_out'.format(layer.name),\n", "793": "                                             layer.output)\n"}}
{"project": "keras", "bug": 25, "project_url": "https://github.com/keras-team/keras", "file_changed": "keras/applications/imagenet_utils.py", "buggy_commit_id": "b470a595f7278acf5e7e47521edf25d3c4f479f1", "fixed_commit_id": "84e168b5fa55933e02e767ff7c86fcc0232aecc6", "lines_deleted": {}, "lines_added": {"40": "    x = x.astype(K.floatx())\n", "41": "\n"}}
{"project": "keras", "bug": 26, "project_url": "https://github.com/keras-team/keras", "file_changed": "keras/backend/tensorflow_backend.py", "buggy_commit_id": "87417470c8168772559be0531e297120c569a422", "fixed_commit_id": "97d5fa920e4f8248128f7c1b460fd9bb20d3478f", "lines_deleted": {"2873": "                new_states = [tf.where(tiled_mask_t, new_states[i], states[i]) for i in range(len(states))]\n"}, "lines_added": {"2873": "                new_states = [\n", "2874": "                    tf.where(tf.tile(mask_t, tf.stack([1, tf.shape(new_states[i])[1]])),\n", "2875": "                             new_states[i], states[i]) for i in range(len(states))\n", "2876": "                ]\n"}}
{"project": "keras", "bug": 27, "project_url": "https://github.com/keras-team/keras", "file_changed": "keras/layers/wrappers.py", "buggy_commit_id": "49f5b931410bc2e56378f20a15e8ac919e0efb88", "fixed_commit_id": "b076e227da6beaf87d6c84eff1a92285e4662acf", "lines_deleted": {}, "lines_added": {"489": "    def get_updates_for(self, inputs=None):\n", "490": "        forward_updates = self.forward_layer.get_updates_for(inputs)\n", "491": "        backward_updates = self.backward_layer.get_updates_for(inputs)\n", "492": "        return (super(Wrapper, self).get_updates_for(inputs) +\n", "493": "                forward_updates + backward_updates)\n", "494": "\n", "501": "    def get_losses_for(self, inputs=None):\n", "502": "        forward_losses = self.forward_layer.get_losses_for(inputs)\n", "503": "        backward_losses = self.backward_layer.get_losses_for(inputs)\n", "504": "        return (super(Wrapper, self).get_losses_for(inputs) +\n", "505": "                forward_losses + backward_losses)\n", "506": "\n"}}
{"project": "keras", "bug": 31, "project_url": "https://github.com/keras-team/keras", "file_changed": "keras/backend/tensorflow_backend.py", "buggy_commit_id": "ced81968b0e9d8b1389e6580721ac60d9cf3ca60", "fixed_commit_id": "e2a10a5e6e156a45e946c4d08db7133f997c1f9a", "lines_deleted": {"3944": "    label_length = tf.to_int32(tf.squeeze(label_length))\n", "3945": "    input_length = tf.to_int32(tf.squeeze(input_length))\n"}, "lines_added": {"3944": "    label_length = tf.to_int32(tf.squeeze(label_length, axis=-1))\n", "3945": "    input_length = tf.to_int32(tf.squeeze(input_length, axis=-1))\n"}}
{"project": "keras", "bug": 33, "project_url": "https://github.com/keras-team/keras", "file_changed": "keras/preprocessing/text.py", "buggy_commit_id": "1c9a49781da2101507db23e2014e4e5d16bd2e52", "fixed_commit_id": "70ad0d6e4a569701ef106058397ad0540ec08340", "lines_deleted": {"40": "    if sys.version_info < (3,) and isinstance(text, unicode):\n", "41": "        translate_map = dict((ord(c), unicode(split)) for c in filters)\n", "43": "        translate_map = maketrans(filters, split * len(filters))\n", "45": "    text = text.translate(translate_map)\n"}, "lines_added": {"40": "    if sys.version_info < (3,):\n", "41": "        if isinstance(text, unicode):\n", "42": "            translate_map = dict((ord(c), unicode(split)) for c in filters)\n", "43": "            text = text.translate(translate_map)\n", "44": "        elif len(split) == 1:\n", "45": "            translate_map = maketrans(filters, split * len(filters))\n", "46": "            text = text.translate(translate_map)\n", "47": "        else:\n", "48": "            for c in filters:\n", "49": "                text = text.replace(c, split)\n", "51": "        translate_dict = dict((c, split) for c in filters)\n", "52": "        translate_map = maketrans(translate_dict)\n", "53": "        text = text.translate(translate_map)\n"}}
{"project": "keras", "bug": 36, "project_url": "https://github.com/keras-team/keras", "file_changed": "keras/backend/tensorflow_backend.py", "buggy_commit_id": "85f011df5a5c0fcf1f01b39eca338eb6b7e58401", "fixed_commit_id": "fb1887d132a8ce8548ff53d868a6ba531cd63b34", "lines_deleted": {"3418": "        strides = (1, 1) + strides + (1,)\n", "3421": "        strides = (1, 1, 1) + strides\n"}, "lines_added": {"3418": "        strides = (1,) + strides * 2 + (1,)\n", "3421": "        strides = (1, 1) + strides * 2\n"}}
{"project": "keras", "bug": 38, "project_url": "https://github.com/keras-team/keras", "file_changed": "keras/layers/recurrent.py", "buggy_commit_id": "53ec990d54130dd0a457dd235c93d39de32d571d", "fixed_commit_id": "64f80d6077edd5f277a1181df94bf4510ea0517a", "lines_deleted": {"108": "            input_shape = (input_shape[0], input_shape[1], output_dim)\n"}, "lines_added": {"108": "            input_shape = (input_shape[0], output_dim)\n"}}
{"project": "keras", "bug": 39, "project_url": "https://github.com/keras-team/keras", "file_changed": "keras/utils/generic_utils.py", "buggy_commit_id": "3a431ea52d090fb3ef8a1e0e5d7f796d9a42e097", "fixed_commit_id": "a5ecde595c47f35fd7293d52eba48efd687ca94e", "lines_deleted": {"329": "                    current < self.target):\n"}, "lines_added": {"329": "                    (self.target is not None and current < self.target)):\n"}}
{"project": "keras", "bug": 43, "project_url": "https://github.com/keras-team/keras", "file_changed": "keras/utils/np_utils.py", "buggy_commit_id": "e3e97c401aa8251e957b73fba8ed4d108c106f12", "fixed_commit_id": "b17169ca5d6cd1c8aeb237fc2bb0555c9e1b6a02", "lines_deleted": {}, "lines_added": {"21": "    if input_shape and input_shape[-1] == 1:\n", "22": "        input_shape = tuple(input_shape[:-1])\n"}}
{"project": "keras", "bug": 45, "project_url": "https://github.com/keras-team/keras", "file_changed": "keras/layers/recurrent.py", "buggy_commit_id": "d368dc870bfd8fdd4ca0ff82bd5b61aa549291c5", "fixed_commit_id": "159bb1aac17a8de0f96997d35703b8f26926a848", "lines_deleted": {"1805": "            x_i = K.dot(inputs_i, self.kernel_i) + self.bias_i\n", "1806": "            x_f = K.dot(inputs_f, self.kernel_f) + self.bias_f\n", "1807": "            x_c = K.dot(inputs_c, self.kernel_c) + self.bias_c\n", "1808": "            x_o = K.dot(inputs_o, self.kernel_o) + self.bias_o\n"}, "lines_added": {"1805": "            x_i = K.dot(inputs_i, self.kernel_i)\n", "1806": "            x_f = K.dot(inputs_f, self.kernel_f)\n", "1807": "            x_c = K.dot(inputs_c, self.kernel_c)\n", "1808": "            x_o = K.dot(inputs_o, self.kernel_o)\n", "1809": "            if self.use_bias:\n", "1810": "                x_i = K.bias_add(x_i, self.bias_i)\n", "1811": "                x_f = K.bias_add(x_f, self.bias_f)\n", "1812": "                x_c = K.bias_add(x_c, self.bias_c)\n", "1813": "                x_o = K.bias_add(x_o, self.bias_o)\n"}}
{"project": "keras", "bug": 2, "project_url": "https://github.com/keras-team/keras", "file_changed": "keras/backend/numpy_backend.py", "buggy_commit_id": "2f55055a9f053b35fa721d3eb75dd07ea5a5f1e3", "fixed_commit_id": "c24d16af155e20976bdf61e468ba760408e676ff", "lines_deleted": {}, "lines_added": {"318": "def in_top_k(predictions, targets, k):\n", "319": "    top_k = np.argsort(-predictions)[:, :k]\n", "320": "    targets = targets.reshape(-1, 1)\n", "321": "    return np.any(targets == top_k, axis=-1)\n", "322": "\n", "323": "\n"}}
{"project": "keras", "bug": 4, "project_url": "https://github.com/keras-team/keras", "file_changed": "keras/optimizers.py", "buggy_commit_id": "b0bfd5201da2bfced84028bcc5bda05bdfd75af7", "fixed_commit_id": "4185cbb50bfcae9cc30b0fc7b67e81d67a50a8ac", "lines_deleted": {"705": "        grads = self.optimizer.compute_gradients(loss, params)\n"}, "lines_added": {"705": "        grads = self.optimizer.compute_gradients(loss, var_list=params)\n"}}
{"project": "keras", "bug": 5, "project_url": "https://github.com/keras-team/keras", "file_changed": "keras/utils/data_utils.py", "buggy_commit_id": "b847b4601d608050bab6eccd049fce28b7bf1b1f", "fixed_commit_id": "e11c48d9ce3ee47bb8a966549b14cbd5b10ee70d", "lines_deleted": {"172": "        cache_dir = os.path.join(os.path.expanduser('~'), '.keras')\n"}, "lines_added": {"172": "        if 'KERAS_HOME' in os.environ:\n", "173": "            cache_dir = os.environ.get('KERAS_HOME')\n", "174": "        else:\n", "175": "            cache_dir = os.path.join(os.path.expanduser('~'), '.keras')\n"}}
{"project": "keras", "bug": 6, "project_url": "https://github.com/keras-team/keras", "file_changed": "keras/engine/training_utils.py", "buggy_commit_id": "88af7d0c97497b5c3a198ee9416b2accfbc72c36", "fixed_commit_id": "4b54657ab4806b0aaef8f8eeb973edb83c3d3483", "lines_deleted": {"412": "            score_array /= K.mean(mask)\n"}, "lines_added": {"412": "            score_array /= K.mean(mask) + K.epsilon()\n"}}
{"project": "keras", "bug": 7, "project_url": "https://github.com/keras-team/keras", "file_changed": "keras/wrappers/scikit_learn.py", "buggy_commit_id": "26b620fb37c885d60183f83abc744f43775ce75a", "fixed_commit_id": "c05ef1fd95a6024155ab59656fef8dac5a45c335", "lines_deleted": {"322": "        return np.squeeze(self.model.predict(x, **kwargs))\n"}, "lines_added": {"322": "        return np.squeeze(self.model.predict(x, **kwargs), axis=-1)\n"}}
{"project": "keras", "bug": 9, "project_url": "https://github.com/keras-team/keras", "file_changed": "docs/autogen.py", "buggy_commit_id": "0cd3b07eb5de1aaaad84d1ff7f7c2ed7dab4b23c", "fixed_commit_id": "0505393746d56ddacc34bb1c016dba79429c9ac9", "lines_deleted": {"119": "    block = docstring[starting_point:(None if ending_point == -1 else\n", "120": "                                      ending_point - 1)]\n"}, "lines_added": {"119": "    block = docstring[starting_point:(ending_point - 1 if ending_point > -1 else\n", "120": "                                      section_end)]\n"}}
{"project": "keras", "bug": 13, "project_url": "https://github.com/keras-team/keras", "file_changed": "keras/engine/training_generator.py", "buggy_commit_id": "2bfd1f2c950df5fc3f40b903c1966f1b0a48bee4", "fixed_commit_id": "a07253d8269e1b750f0a64767cc9a07da8a3b7ea", "lines_deleted": {"126": "                    val_enqueuer_gen = iter_sequence_infinite(generator)\n"}, "lines_added": {"126": "                    val_enqueuer_gen = iter_sequence_infinite(val_data)\n", "127": "                    validation_steps = validation_steps or len(val_data)\n"}}
{"project": "keras", "bug": 14, "project_url": "https://github.com/keras-team/keras", "file_changed": "keras/metrics.py", "buggy_commit_id": "98465b85d020f1326bcef7632f1261a9a7a84e92", "fixed_commit_id": "02bc5010a04bb11c8e91835cc9775c8149dec754", "lines_deleted": {"47": "    return K.mean(K.in_top_k(y_pred, K.cast(K.max(y_true, axis=-1), 'int32'), k),\n"}, "lines_added": {"47": "    # If the shape of y_true is (num_samples, 1), flatten to (num_samples,)\n", "48": "    return K.mean(K.in_top_k(y_pred, K.cast(K.flatten(y_true), 'int32'), k),\n"}}
{"project": "keras", "bug": 17, "project_url": "https://github.com/keras-team/keras", "file_changed": "keras/metrics.py", "buggy_commit_id": "c913b6da92f6ab9a3f4c897caa4085e782a14680", "fixed_commit_id": "5a6af4bc6d44e9adbc2a21804bfcd18c4ce849ef", "lines_deleted": {"36": "    return K.cast(K.equal(K.max(y_true, axis=-1),\n"}, "lines_added": {"36": "    # flatten y_true in case it's in shape (num_samples, 1) instead of (num_samples,)\n", "37": "    return K.cast(K.equal(K.flatten(y_true),\n"}}
{"project": "keras", "bug": 22, "project_url": "https://github.com/keras-team/keras", "file_changed": "keras/engine/input_layer.py", "buggy_commit_id": "54386efa549f850dff13f79fc3af67799a4e5d4f", "fixed_commit_id": "ee02d256611b17d11e37b86bd4f618d7f2a37d84", "lines_deleted": {}, "lines_added": {"44": "        self.supports_masking = True\n"}}
{"project": "keras", "bug": 23, "project_url": "https://github.com/keras-team/keras", "file_changed": "keras/engine/sequential.py", "buggy_commit_id": "3dcd9c767ce6875fc8b69c74971ac8a552e23131", "fixed_commit_id": "69c30a150f0b2caee7961ca1c0080960ef5ad6f6", "lines_deleted": {"151": "                    batch_shape = first_layer.batch_input_shape\n", "152": "                    dtype = first_layer.dtype\n"}, "lines_added": {}}
{"project": "keras", "bug": 24, "project_url": "https://github.com/keras-team/keras", "file_changed": "keras/callbacks.py", "buggy_commit_id": "d7884570b10951d156aa086ee29a4df9eab79cf3", "fixed_commit_id": "bcf0031b54d555179be81c088cc3df0a723d7907", "lines_deleted": {"788": "                    tf.summary.histogram('{}_out'.format(layer.name),\n", "789": "                                         layer.output)\n"}, "lines_added": {"788": "                    if isinstance(layer.output, list):\n", "789": "                        for i, output in enumerate(layer.output):\n", "790": "                            tf.summary.histogram('{}_out_{}'.format(layer.name, i), output)\n", "791": "                    else:\n", "792": "                        tf.summary.histogram('{}_out'.format(layer.name),\n", "793": "                                             layer.output)\n"}}
{"project": "keras", "bug": 25, "project_url": "https://github.com/keras-team/keras", "file_changed": "keras/applications/imagenet_utils.py", "buggy_commit_id": "b470a595f7278acf5e7e47521edf25d3c4f479f1", "fixed_commit_id": "84e168b5fa55933e02e767ff7c86fcc0232aecc6", "lines_deleted": {}, "lines_added": {"40": "    x = x.astype(K.floatx())\n", "41": "\n"}}
{"project": "keras", "bug": 26, "project_url": "https://github.com/keras-team/keras", "file_changed": "keras/backend/tensorflow_backend.py", "buggy_commit_id": "87417470c8168772559be0531e297120c569a422", "fixed_commit_id": "97d5fa920e4f8248128f7c1b460fd9bb20d3478f", "lines_deleted": {"2873": "                new_states = [tf.where(tiled_mask_t, new_states[i], states[i]) for i in range(len(states))]\n"}, "lines_added": {"2873": "                new_states = [\n", "2874": "                    tf.where(tf.tile(mask_t, tf.stack([1, tf.shape(new_states[i])[1]])),\n", "2875": "                             new_states[i], states[i]) for i in range(len(states))\n", "2876": "                ]\n"}}
{"project": "keras", "bug": 27, "project_url": "https://github.com/keras-team/keras", "file_changed": "keras/layers/wrappers.py", "buggy_commit_id": "49f5b931410bc2e56378f20a15e8ac919e0efb88", "fixed_commit_id": "b076e227da6beaf87d6c84eff1a92285e4662acf", "lines_deleted": {}, "lines_added": {"489": "    def get_updates_for(self, inputs=None):\n", "490": "        forward_updates = self.forward_layer.get_updates_for(inputs)\n", "491": "        backward_updates = self.backward_layer.get_updates_for(inputs)\n", "492": "        return (super(Wrapper, self).get_updates_for(inputs) +\n", "493": "                forward_updates + backward_updates)\n", "494": "\n", "501": "    def get_losses_for(self, inputs=None):\n", "502": "        forward_losses = self.forward_layer.get_losses_for(inputs)\n", "503": "        backward_losses = self.backward_layer.get_losses_for(inputs)\n", "504": "        return (super(Wrapper, self).get_losses_for(inputs) +\n", "505": "                forward_losses + backward_losses)\n", "506": "\n"}}
{"project": "keras", "bug": 31, "project_url": "https://github.com/keras-team/keras", "file_changed": "keras/backend/tensorflow_backend.py", "buggy_commit_id": "ced81968b0e9d8b1389e6580721ac60d9cf3ca60", "fixed_commit_id": "e2a10a5e6e156a45e946c4d08db7133f997c1f9a", "lines_deleted": {"3944": "    label_length = tf.to_int32(tf.squeeze(label_length))\n", "3945": "    input_length = tf.to_int32(tf.squeeze(input_length))\n"}, "lines_added": {"3944": "    label_length = tf.to_int32(tf.squeeze(label_length, axis=-1))\n", "3945": "    input_length = tf.to_int32(tf.squeeze(input_length, axis=-1))\n"}}
{"project": "keras", "bug": 33, "project_url": "https://github.com/keras-team/keras", "file_changed": "keras/preprocessing/text.py", "buggy_commit_id": "1c9a49781da2101507db23e2014e4e5d16bd2e52", "fixed_commit_id": "70ad0d6e4a569701ef106058397ad0540ec08340", "lines_deleted": {"40": "    if sys.version_info < (3,) and isinstance(text, unicode):\n", "41": "        translate_map = dict((ord(c), unicode(split)) for c in filters)\n", "43": "        translate_map = maketrans(filters, split * len(filters))\n", "45": "    text = text.translate(translate_map)\n"}, "lines_added": {"40": "    if sys.version_info < (3,):\n", "41": "        if isinstance(text, unicode):\n", "42": "            translate_map = dict((ord(c), unicode(split)) for c in filters)\n", "43": "            text = text.translate(translate_map)\n", "44": "        elif len(split) == 1:\n", "45": "            translate_map = maketrans(filters, split * len(filters))\n", "46": "            text = text.translate(translate_map)\n", "47": "        else:\n", "48": "            for c in filters:\n", "49": "                text = text.replace(c, split)\n", "51": "        translate_dict = dict((c, split) for c in filters)\n", "52": "        translate_map = maketrans(translate_dict)\n", "53": "        text = text.translate(translate_map)\n"}}
{"project": "keras", "bug": 36, "project_url": "https://github.com/keras-team/keras", "file_changed": "keras/backend/tensorflow_backend.py", "buggy_commit_id": "85f011df5a5c0fcf1f01b39eca338eb6b7e58401", "fixed_commit_id": "fb1887d132a8ce8548ff53d868a6ba531cd63b34", "lines_deleted": {"3418": "        strides = (1, 1) + strides + (1,)\n", "3421": "        strides = (1, 1, 1) + strides\n"}, "lines_added": {"3418": "        strides = (1,) + strides * 2 + (1,)\n", "3421": "        strides = (1, 1) + strides * 2\n"}}
{"project": "keras", "bug": 38, "project_url": "https://github.com/keras-team/keras", "file_changed": "keras/layers/recurrent.py", "buggy_commit_id": "53ec990d54130dd0a457dd235c93d39de32d571d", "fixed_commit_id": "64f80d6077edd5f277a1181df94bf4510ea0517a", "lines_deleted": {"108": "            input_shape = (input_shape[0], input_shape[1], output_dim)\n"}, "lines_added": {"108": "            input_shape = (input_shape[0], output_dim)\n"}}
{"project": "keras", "bug": 39, "project_url": "https://github.com/keras-team/keras", "file_changed": "keras/utils/generic_utils.py", "buggy_commit_id": "3a431ea52d090fb3ef8a1e0e5d7f796d9a42e097", "fixed_commit_id": "a5ecde595c47f35fd7293d52eba48efd687ca94e", "lines_deleted": {"329": "                    current < self.target):\n"}, "lines_added": {"329": "                    (self.target is not None and current < self.target)):\n"}}
{"project": "keras", "bug": 43, "project_url": "https://github.com/keras-team/keras", "file_changed": "keras/utils/np_utils.py", "buggy_commit_id": "e3e97c401aa8251e957b73fba8ed4d108c106f12", "fixed_commit_id": "b17169ca5d6cd1c8aeb237fc2bb0555c9e1b6a02", "lines_deleted": {}, "lines_added": {"21": "    if input_shape and input_shape[-1] == 1:\n", "22": "        input_shape = tuple(input_shape[:-1])\n"}}
{"project": "keras", "bug": 45, "project_url": "https://github.com/keras-team/keras", "file_changed": "keras/layers/recurrent.py", "buggy_commit_id": "d368dc870bfd8fdd4ca0ff82bd5b61aa549291c5", "fixed_commit_id": "159bb1aac17a8de0f96997d35703b8f26926a848", "lines_deleted": {"1805": "            x_i = K.dot(inputs_i, self.kernel_i) + self.bias_i\n", "1806": "            x_f = K.dot(inputs_f, self.kernel_f) + self.bias_f\n", "1807": "            x_c = K.dot(inputs_c, self.kernel_c) + self.bias_c\n", "1808": "            x_o = K.dot(inputs_o, self.kernel_o) + self.bias_o\n"}, "lines_added": {"1805": "            x_i = K.dot(inputs_i, self.kernel_i)\n", "1806": "            x_f = K.dot(inputs_f, self.kernel_f)\n", "1807": "            x_c = K.dot(inputs_c, self.kernel_c)\n", "1808": "            x_o = K.dot(inputs_o, self.kernel_o)\n", "1809": "            if self.use_bias:\n", "1810": "                x_i = K.bias_add(x_i, self.bias_i)\n", "1811": "                x_f = K.bias_add(x_f, self.bias_f)\n", "1812": "                x_c = K.bias_add(x_c, self.bias_c)\n", "1813": "                x_o = K.bias_add(x_o, self.bias_o)\n"}}
{"project": "keras", "bug": 2, "project_url": "https://github.com/keras-team/keras", "file_changed": "keras/backend/numpy_backend.py", "buggy_commit_id": "2f55055a9f053b35fa721d3eb75dd07ea5a5f1e3", "fixed_commit_id": "c24d16af155e20976bdf61e468ba760408e676ff", "lines_deleted": {}, "lines_added": {"318": "def in_top_k(predictions, targets, k):\n", "319": "    top_k = np.argsort(-predictions)[:, :k]\n", "320": "    targets = targets.reshape(-1, 1)\n", "321": "    return np.any(targets == top_k, axis=-1)\n", "322": "\n", "323": "\n"}}
{"project": "keras", "bug": 4, "project_url": "https://github.com/keras-team/keras", "file_changed": "keras/optimizers.py", "buggy_commit_id": "b0bfd5201da2bfced84028bcc5bda05bdfd75af7", "fixed_commit_id": "4185cbb50bfcae9cc30b0fc7b67e81d67a50a8ac", "lines_deleted": {"705": "        grads = self.optimizer.compute_gradients(loss, params)\n"}, "lines_added": {"705": "        grads = self.optimizer.compute_gradients(loss, var_list=params)\n"}}
{"project": "keras", "bug": 5, "project_url": "https://github.com/keras-team/keras", "file_changed": "keras/utils/data_utils.py", "buggy_commit_id": "b847b4601d608050bab6eccd049fce28b7bf1b1f", "fixed_commit_id": "e11c48d9ce3ee47bb8a966549b14cbd5b10ee70d", "lines_deleted": {"172": "        cache_dir = os.path.join(os.path.expanduser('~'), '.keras')\n"}, "lines_added": {"172": "        if 'KERAS_HOME' in os.environ:\n", "173": "            cache_dir = os.environ.get('KERAS_HOME')\n", "174": "        else:\n", "175": "            cache_dir = os.path.join(os.path.expanduser('~'), '.keras')\n"}}
{"project": "keras", "bug": 6, "project_url": "https://github.com/keras-team/keras", "file_changed": "keras/engine/training_utils.py", "buggy_commit_id": "88af7d0c97497b5c3a198ee9416b2accfbc72c36", "fixed_commit_id": "4b54657ab4806b0aaef8f8eeb973edb83c3d3483", "lines_deleted": {"412": "            score_array /= K.mean(mask)\n"}, "lines_added": {"412": "            score_array /= K.mean(mask) + K.epsilon()\n"}}
{"project": "keras", "bug": 7, "project_url": "https://github.com/keras-team/keras", "file_changed": "keras/wrappers/scikit_learn.py", "buggy_commit_id": "26b620fb37c885d60183f83abc744f43775ce75a", "fixed_commit_id": "c05ef1fd95a6024155ab59656fef8dac5a45c335", "lines_deleted": {"322": "        return np.squeeze(self.model.predict(x, **kwargs))\n"}, "lines_added": {"322": "        return np.squeeze(self.model.predict(x, **kwargs), axis=-1)\n"}}
{"project": "keras", "bug": 9, "project_url": "https://github.com/keras-team/keras", "file_changed": "docs/autogen.py", "buggy_commit_id": "0cd3b07eb5de1aaaad84d1ff7f7c2ed7dab4b23c", "fixed_commit_id": "0505393746d56ddacc34bb1c016dba79429c9ac9", "lines_deleted": {"119": "    block = docstring[starting_point:(None if ending_point == -1 else\n", "120": "                                      ending_point - 1)]\n"}, "lines_added": {"119": "    block = docstring[starting_point:(ending_point - 1 if ending_point > -1 else\n", "120": "                                      section_end)]\n"}}
{"project": "keras", "bug": 13, "project_url": "https://github.com/keras-team/keras", "file_changed": "keras/engine/training_generator.py", "buggy_commit_id": "2bfd1f2c950df5fc3f40b903c1966f1b0a48bee4", "fixed_commit_id": "a07253d8269e1b750f0a64767cc9a07da8a3b7ea", "lines_deleted": {"126": "                    val_enqueuer_gen = iter_sequence_infinite(generator)\n"}, "lines_added": {"126": "                    val_enqueuer_gen = iter_sequence_infinite(val_data)\n", "127": "                    validation_steps = validation_steps or len(val_data)\n"}}
{"project": "keras", "bug": 14, "project_url": "https://github.com/keras-team/keras", "file_changed": "keras/metrics.py", "buggy_commit_id": "98465b85d020f1326bcef7632f1261a9a7a84e92", "fixed_commit_id": "02bc5010a04bb11c8e91835cc9775c8149dec754", "lines_deleted": {"47": "    return K.mean(K.in_top_k(y_pred, K.cast(K.max(y_true, axis=-1), 'int32'), k),\n"}, "lines_added": {"47": "    # If the shape of y_true is (num_samples, 1), flatten to (num_samples,)\n", "48": "    return K.mean(K.in_top_k(y_pred, K.cast(K.flatten(y_true), 'int32'), k),\n"}}
{"project": "keras", "bug": 17, "project_url": "https://github.com/keras-team/keras", "file_changed": "keras/metrics.py", "buggy_commit_id": "c913b6da92f6ab9a3f4c897caa4085e782a14680", "fixed_commit_id": "5a6af4bc6d44e9adbc2a21804bfcd18c4ce849ef", "lines_deleted": {"36": "    return K.cast(K.equal(K.max(y_true, axis=-1),\n"}, "lines_added": {"36": "    # flatten y_true in case it's in shape (num_samples, 1) instead of (num_samples,)\n", "37": "    return K.cast(K.equal(K.flatten(y_true),\n"}}
{"project": "keras", "bug": 22, "project_url": "https://github.com/keras-team/keras", "file_changed": "keras/engine/input_layer.py", "buggy_commit_id": "54386efa549f850dff13f79fc3af67799a4e5d4f", "fixed_commit_id": "ee02d256611b17d11e37b86bd4f618d7f2a37d84", "lines_deleted": {}, "lines_added": {"44": "        self.supports_masking = True\n"}}
{"project": "keras", "bug": 23, "project_url": "https://github.com/keras-team/keras", "file_changed": "keras/engine/sequential.py", "buggy_commit_id": "3dcd9c767ce6875fc8b69c74971ac8a552e23131", "fixed_commit_id": "69c30a150f0b2caee7961ca1c0080960ef5ad6f6", "lines_deleted": {"151": "                    batch_shape = first_layer.batch_input_shape\n", "152": "                    dtype = first_layer.dtype\n"}, "lines_added": {}}
{"project": "keras", "bug": 24, "project_url": "https://github.com/keras-team/keras", "file_changed": "keras/callbacks.py", "buggy_commit_id": "d7884570b10951d156aa086ee29a4df9eab79cf3", "fixed_commit_id": "bcf0031b54d555179be81c088cc3df0a723d7907", "lines_deleted": {"788": "                    tf.summary.histogram('{}_out'.format(layer.name),\n", "789": "                                         layer.output)\n"}, "lines_added": {"788": "                    if isinstance(layer.output, list):\n", "789": "                        for i, output in enumerate(layer.output):\n", "790": "                            tf.summary.histogram('{}_out_{}'.format(layer.name, i), output)\n", "791": "                    else:\n", "792": "                        tf.summary.histogram('{}_out'.format(layer.name),\n", "793": "                                             layer.output)\n"}}
{"project": "keras", "bug": 25, "project_url": "https://github.com/keras-team/keras", "file_changed": "keras/applications/imagenet_utils.py", "buggy_commit_id": "b470a595f7278acf5e7e47521edf25d3c4f479f1", "fixed_commit_id": "84e168b5fa55933e02e767ff7c86fcc0232aecc6", "lines_deleted": {}, "lines_added": {"40": "    x = x.astype(K.floatx())\n", "41": "\n"}}
{"project": "keras", "bug": 26, "project_url": "https://github.com/keras-team/keras", "file_changed": "keras/backend/tensorflow_backend.py", "buggy_commit_id": "87417470c8168772559be0531e297120c569a422", "fixed_commit_id": "97d5fa920e4f8248128f7c1b460fd9bb20d3478f", "lines_deleted": {"2873": "                new_states = [tf.where(tiled_mask_t, new_states[i], states[i]) for i in range(len(states))]\n"}, "lines_added": {"2873": "                new_states = [\n", "2874": "                    tf.where(tf.tile(mask_t, tf.stack([1, tf.shape(new_states[i])[1]])),\n", "2875": "                             new_states[i], states[i]) for i in range(len(states))\n", "2876": "                ]\n"}}
{"project": "keras", "bug": 27, "project_url": "https://github.com/keras-team/keras", "file_changed": "keras/layers/wrappers.py", "buggy_commit_id": "49f5b931410bc2e56378f20a15e8ac919e0efb88", "fixed_commit_id": "b076e227da6beaf87d6c84eff1a92285e4662acf", "lines_deleted": {}, "lines_added": {"489": "    def get_updates_for(self, inputs=None):\n", "490": "        forward_updates = self.forward_layer.get_updates_for(inputs)\n", "491": "        backward_updates = self.backward_layer.get_updates_for(inputs)\n", "492": "        return (super(Wrapper, self).get_updates_for(inputs) +\n", "493": "                forward_updates + backward_updates)\n", "494": "\n", "501": "    def get_losses_for(self, inputs=None):\n", "502": "        forward_losses = self.forward_layer.get_losses_for(inputs)\n", "503": "        backward_losses = self.backward_layer.get_losses_for(inputs)\n", "504": "        return (super(Wrapper, self).get_losses_for(inputs) +\n", "505": "                forward_losses + backward_losses)\n", "506": "\n"}}
{"project": "keras", "bug": 31, "project_url": "https://github.com/keras-team/keras", "file_changed": "keras/backend/tensorflow_backend.py", "buggy_commit_id": "ced81968b0e9d8b1389e6580721ac60d9cf3ca60", "fixed_commit_id": "e2a10a5e6e156a45e946c4d08db7133f997c1f9a", "lines_deleted": {"3944": "    label_length = tf.to_int32(tf.squeeze(label_length))\n", "3945": "    input_length = tf.to_int32(tf.squeeze(input_length))\n"}, "lines_added": {"3944": "    label_length = tf.to_int32(tf.squeeze(label_length, axis=-1))\n", "3945": "    input_length = tf.to_int32(tf.squeeze(input_length, axis=-1))\n"}}
{"project": "keras", "bug": 33, "project_url": "https://github.com/keras-team/keras", "file_changed": "keras/preprocessing/text.py", "buggy_commit_id": "1c9a49781da2101507db23e2014e4e5d16bd2e52", "fixed_commit_id": "70ad0d6e4a569701ef106058397ad0540ec08340", "lines_deleted": {"40": "    if sys.version_info < (3,) and isinstance(text, unicode):\n", "41": "        translate_map = dict((ord(c), unicode(split)) for c in filters)\n", "43": "        translate_map = maketrans(filters, split * len(filters))\n", "45": "    text = text.translate(translate_map)\n"}, "lines_added": {"40": "    if sys.version_info < (3,):\n", "41": "        if isinstance(text, unicode):\n", "42": "            translate_map = dict((ord(c), unicode(split)) for c in filters)\n", "43": "            text = text.translate(translate_map)\n", "44": "        elif len(split) == 1:\n", "45": "            translate_map = maketrans(filters, split * len(filters))\n", "46": "            text = text.translate(translate_map)\n", "47": "        else:\n", "48": "            for c in filters:\n", "49": "                text = text.replace(c, split)\n", "51": "        translate_dict = dict((c, split) for c in filters)\n", "52": "        translate_map = maketrans(translate_dict)\n", "53": "        text = text.translate(translate_map)\n"}}
{"project": "keras", "bug": 36, "project_url": "https://github.com/keras-team/keras", "file_changed": "keras/backend/tensorflow_backend.py", "buggy_commit_id": "85f011df5a5c0fcf1f01b39eca338eb6b7e58401", "fixed_commit_id": "fb1887d132a8ce8548ff53d868a6ba531cd63b34", "lines_deleted": {"3418": "        strides = (1, 1) + strides + (1,)\n", "3421": "        strides = (1, 1, 1) + strides\n"}, "lines_added": {"3418": "        strides = (1,) + strides * 2 + (1,)\n", "3421": "        strides = (1, 1) + strides * 2\n"}}
{"project": "keras", "bug": 38, "project_url": "https://github.com/keras-team/keras", "file_changed": "keras/layers/recurrent.py", "buggy_commit_id": "53ec990d54130dd0a457dd235c93d39de32d571d", "fixed_commit_id": "64f80d6077edd5f277a1181df94bf4510ea0517a", "lines_deleted": {"108": "            input_shape = (input_shape[0], input_shape[1], output_dim)\n"}, "lines_added": {"108": "            input_shape = (input_shape[0], output_dim)\n"}}
{"project": "keras", "bug": 39, "project_url": "https://github.com/keras-team/keras", "file_changed": "keras/utils/generic_utils.py", "buggy_commit_id": "3a431ea52d090fb3ef8a1e0e5d7f796d9a42e097", "fixed_commit_id": "a5ecde595c47f35fd7293d52eba48efd687ca94e", "lines_deleted": {"329": "                    current < self.target):\n"}, "lines_added": {"329": "                    (self.target is not None and current < self.target)):\n"}}
{"project": "keras", "bug": 43, "project_url": "https://github.com/keras-team/keras", "file_changed": "keras/utils/np_utils.py", "buggy_commit_id": "e3e97c401aa8251e957b73fba8ed4d108c106f12", "fixed_commit_id": "b17169ca5d6cd1c8aeb237fc2bb0555c9e1b6a02", "lines_deleted": {}, "lines_added": {"21": "    if input_shape and input_shape[-1] == 1:\n", "22": "        input_shape = tuple(input_shape[:-1])\n"}}
{"project": "keras", "bug": 45, "project_url": "https://github.com/keras-team/keras", "file_changed": "keras/layers/recurrent.py", "buggy_commit_id": "d368dc870bfd8fdd4ca0ff82bd5b61aa549291c5", "fixed_commit_id": "159bb1aac17a8de0f96997d35703b8f26926a848", "lines_deleted": {"1805": "            x_i = K.dot(inputs_i, self.kernel_i) + self.bias_i\n", "1806": "            x_f = K.dot(inputs_f, self.kernel_f) + self.bias_f\n", "1807": "            x_c = K.dot(inputs_c, self.kernel_c) + self.bias_c\n", "1808": "            x_o = K.dot(inputs_o, self.kernel_o) + self.bias_o\n"}, "lines_added": {"1805": "            x_i = K.dot(inputs_i, self.kernel_i)\n", "1806": "            x_f = K.dot(inputs_f, self.kernel_f)\n", "1807": "            x_c = K.dot(inputs_c, self.kernel_c)\n", "1808": "            x_o = K.dot(inputs_o, self.kernel_o)\n", "1809": "            if self.use_bias:\n", "1810": "                x_i = K.bias_add(x_i, self.bias_i)\n", "1811": "                x_f = K.bias_add(x_f, self.bias_f)\n", "1812": "                x_c = K.bias_add(x_c, self.bias_c)\n", "1813": "                x_o = K.bias_add(x_o, self.bias_o)\n"}}
