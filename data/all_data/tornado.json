{"project": "tornado", "bug": 2, "project_url": "https://github.com/tornadoweb/tornado", "file_changed": "tornado/http1connection.py", "buggy_commit_id": "2ca8821d006f6693f920a4b183a3a7c985a5c8ad", "fixed_commit_id": "4f486a4aec746e9d66441600ee3b0743228b061c", "lines_deleted": {"392": "                and \"Transfer-Encoding\" not in headers\n"}, "lines_added": {"392": "                and (\n", "393": "                    \"Transfer-Encoding\" not in headers\n", "394": "                    or headers[\"Transfer-Encoding\"] == \"chunked\"\n", "395": "                )\n"}}
{"project": "tornado", "bug": 3, "project_url": "https://github.com/tornadoweb/tornado", "file_changed": "tornado/httpclient.py", "buggy_commit_id": "940fd87fe9145d1154c8457221f86d56ea063c65", "fixed_commit_id": "aa622e724f80e0f7fcee369f75d69d1db13d72f2", "lines_deleted": {"235": "            if self._instance_cache.get(self.io_loop) is not self:\n", "237": "            del self._instance_cache[self.io_loop]\n"}, "lines_added": {"235": "            cached_val = self._instance_cache.pop(self.io_loop, None)\n", "236": "            # If there's an object other than self in the instance\n", "237": "            # cache for our IOLoop, something has gotten mixed up. A\n", "238": "            # value of None appears to be possible when this is called\n", "239": "            # from a destructor (HTTPClient.__del__) as the weakref\n", "240": "            # gets cleared before the destructor runs.\n", "241": "            if cached_val is not None and cached_val is not self:\n"}}
{"project": "tornado", "bug": 4, "project_url": "https://github.com/tornadoweb/tornado", "file_changed": "tornado/web.py", "buggy_commit_id": "a8420fc681c5423d072978f00eab4d0645057d16", "fixed_commit_id": "db529031a1e1a6e951826aba0b7d0b18f05cd4c7", "lines_deleted": {"2602": "            if (start is not None and start >= size) or end == 0:\n", "2605": "                # content, or when a suffix with length 0 is specified\n", "2610": "            if start is not None and start < 0:\n", "2611": "                start += size\n"}, "lines_added": {"2602": "            if start is not None and start < 0:\n", "2603": "                start += size\n", "2604": "                if start < 0:\n", "2605": "                    start = 0\n", "2606": "            if (\n", "2607": "                start is not None\n", "2608": "                and (start >= size or (end is not None and start >= end))\n", "2609": "            ) or end == 0:\n", "2612": "                # content, or when a suffix with length 0 is specified.\n", "2613": "                # https://tools.ietf.org/html/rfc7233#section-2.1\n", "2614": "                # A byte-range-spec is invalid if the last-byte-pos value is present\n", "2615": "                # and less than the first-byte-pos.\n"}}
{"project": "tornado", "bug": 5, "project_url": "https://github.com/tornadoweb/tornado", "file_changed": "tornado/ioloop.py", "buggy_commit_id": "2d4053daa56c609d642b214399e046671d4a593e", "fixed_commit_id": "886643965b5cb782503d8d7b374b7a794ec2077b", "lines_deleted": {"1220": "            callback_time_sec = self.callback_time / 1000.0\n"}, "lines_added": {"1219": "        callback_time_sec = self.callback_time / 1000.0\n", "1221": "            # The period should be measured from the start of one call\n", "1222": "            # to the start of the next. If one call takes too long,\n", "1223": "            # skip cycles to get back to a multiple of the original\n", "1224": "            # schedule.\n", "1227": "        else:\n", "1228": "            # If the clock moved backwards, ensure we advance the next\n", "1229": "            # timeout instead of recomputing the same value again.\n", "1230": "            # This may result in long gaps between callbacks if the\n", "1231": "            # clock jumps backwards by a lot, but the far more common\n", "1232": "            # scenario is a small NTP adjustment that should just be\n", "1233": "            # ignored.\n", "1234": "            #\n", "1235": "            # Note that on some systems if time.time() runs slower\n", "1236": "            # than time.monotonic() (most common on windows), we\n", "1237": "            # effectively experience a small backwards time jump on\n", "1238": "            # every iteration because PeriodicCallback uses\n", "1239": "            # time.time() while asyncio schedules callbacks using\n", "1240": "            # time.monotonic().\n", "1241": "            # https://github.com/tornadoweb/tornado/issues/2333\n", "1242": "            self._next_timeout += callback_time_sec\n"}}
{"project": "tornado", "bug": 8, "project_url": "https://github.com/tornadoweb/tornado", "file_changed": "tornado/websocket.py", "buggy_commit_id": "34c43f4775971ab9b2b8ed43356f218add6387b2", "fixed_commit_id": "5d4a9ab26372efd255bbb29fde55c41395ed17b1", "lines_deleted": {}, "lines_added": {"618": "        except ValueError:\n", "619": "            self.handler.set_status(400)\n", "620": "            log_msg = \"Missing/Invalid WebSocket headers\"\n", "621": "            self.handler.finish(log_msg)\n", "622": "            gen_log.debug(log_msg)\n", "623": "            return\n", "624": "\n", "625": "        try:\n"}}
{"project": "tornado", "bug": 9, "project_url": "https://github.com/tornadoweb/tornado", "file_changed": "tornado/httputil.py", "buggy_commit_id": "c9d2a3fa573987629ad576e991c2f3b65f4daab4", "fixed_commit_id": "86cc31f52992fb9d11f92de6fd5496842fea2265", "lines_deleted": {}, "lines_added": {"605": "    if args is None:\n", "606": "        return url\n"}}
{"project": "tornado", "bug": 11, "project_url": "https://github.com/tornadoweb/tornado", "file_changed": "tornado/http1connection.py", "buggy_commit_id": "79ef301eb05cac82c075198e502d94dad296f6aa", "fixed_commit_id": "1131c9b50a6a4c0868d0d6fa5e0be077cf8fd1ca", "lines_deleted": {"567": "        if headers.get(\"Transfer-Encoding\") == \"chunked\":\n"}, "lines_added": {"567": "        if headers.get(\"Transfer-Encoding\", \"\").lower() == \"chunked\":\n"}}
{"project": "tornado", "bug": 14, "project_url": "https://github.com/tornadoweb/tornado", "file_changed": "tornado/ioloop.py", "buggy_commit_id": "81ee310adcd905fbdf7c98d9fb6ef0c5a46026c2", "fixed_commit_id": "1d02ed606f1c52636462633d009bdcbaac644331", "lines_deleted": {"251": "            if IOLoop.current(instance=False) is None:\n"}, "lines_added": {"251": "            if IOLoop.current(instance=False) is not None:\n"}}
{"project": "tornado", "bug": 2, "project_url": "https://github.com/tornadoweb/tornado", "file_changed": "tornado/http1connection.py", "buggy_commit_id": "2ca8821d006f6693f920a4b183a3a7c985a5c8ad", "fixed_commit_id": "4f486a4aec746e9d66441600ee3b0743228b061c", "lines_deleted": {"392": "                and \"Transfer-Encoding\" not in headers\n"}, "lines_added": {"392": "                and (\n", "393": "                    \"Transfer-Encoding\" not in headers\n", "394": "                    or headers[\"Transfer-Encoding\"] == \"chunked\"\n", "395": "                )\n"}}
{"project": "tornado", "bug": 3, "project_url": "https://github.com/tornadoweb/tornado", "file_changed": "tornado/httpclient.py", "buggy_commit_id": "940fd87fe9145d1154c8457221f86d56ea063c65", "fixed_commit_id": "aa622e724f80e0f7fcee369f75d69d1db13d72f2", "lines_deleted": {"235": "            if self._instance_cache.get(self.io_loop) is not self:\n", "237": "            del self._instance_cache[self.io_loop]\n"}, "lines_added": {"235": "            cached_val = self._instance_cache.pop(self.io_loop, None)\n", "236": "            # If there's an object other than self in the instance\n", "237": "            # cache for our IOLoop, something has gotten mixed up. A\n", "238": "            # value of None appears to be possible when this is called\n", "239": "            # from a destructor (HTTPClient.__del__) as the weakref\n", "240": "            # gets cleared before the destructor runs.\n", "241": "            if cached_val is not None and cached_val is not self:\n"}}
{"project": "tornado", "bug": 4, "project_url": "https://github.com/tornadoweb/tornado", "file_changed": "tornado/web.py", "buggy_commit_id": "a8420fc681c5423d072978f00eab4d0645057d16", "fixed_commit_id": "db529031a1e1a6e951826aba0b7d0b18f05cd4c7", "lines_deleted": {"2602": "            if (start is not None and start >= size) or end == 0:\n", "2605": "                # content, or when a suffix with length 0 is specified\n", "2610": "            if start is not None and start < 0:\n", "2611": "                start += size\n"}, "lines_added": {"2602": "            if start is not None and start < 0:\n", "2603": "                start += size\n", "2604": "                if start < 0:\n", "2605": "                    start = 0\n", "2606": "            if (\n", "2607": "                start is not None\n", "2608": "                and (start >= size or (end is not None and start >= end))\n", "2609": "            ) or end == 0:\n", "2612": "                # content, or when a suffix with length 0 is specified.\n", "2613": "                # https://tools.ietf.org/html/rfc7233#section-2.1\n", "2614": "                # A byte-range-spec is invalid if the last-byte-pos value is present\n", "2615": "                # and less than the first-byte-pos.\n"}}
{"project": "tornado", "bug": 5, "project_url": "https://github.com/tornadoweb/tornado", "file_changed": "tornado/ioloop.py", "buggy_commit_id": "2d4053daa56c609d642b214399e046671d4a593e", "fixed_commit_id": "886643965b5cb782503d8d7b374b7a794ec2077b", "lines_deleted": {"1220": "            callback_time_sec = self.callback_time / 1000.0\n"}, "lines_added": {"1219": "        callback_time_sec = self.callback_time / 1000.0\n", "1221": "            # The period should be measured from the start of one call\n", "1222": "            # to the start of the next. If one call takes too long,\n", "1223": "            # skip cycles to get back to a multiple of the original\n", "1224": "            # schedule.\n", "1227": "        else:\n", "1228": "            # If the clock moved backwards, ensure we advance the next\n", "1229": "            # timeout instead of recomputing the same value again.\n", "1230": "            # This may result in long gaps between callbacks if the\n", "1231": "            # clock jumps backwards by a lot, but the far more common\n", "1232": "            # scenario is a small NTP adjustment that should just be\n", "1233": "            # ignored.\n", "1234": "            #\n", "1235": "            # Note that on some systems if time.time() runs slower\n", "1236": "            # than time.monotonic() (most common on windows), we\n", "1237": "            # effectively experience a small backwards time jump on\n", "1238": "            # every iteration because PeriodicCallback uses\n", "1239": "            # time.time() while asyncio schedules callbacks using\n", "1240": "            # time.monotonic().\n", "1241": "            # https://github.com/tornadoweb/tornado/issues/2333\n", "1242": "            self._next_timeout += callback_time_sec\n"}}
{"project": "tornado", "bug": 8, "project_url": "https://github.com/tornadoweb/tornado", "file_changed": "tornado/websocket.py", "buggy_commit_id": "34c43f4775971ab9b2b8ed43356f218add6387b2", "fixed_commit_id": "5d4a9ab26372efd255bbb29fde55c41395ed17b1", "lines_deleted": {}, "lines_added": {"618": "        except ValueError:\n", "619": "            self.handler.set_status(400)\n", "620": "            log_msg = \"Missing/Invalid WebSocket headers\"\n", "621": "            self.handler.finish(log_msg)\n", "622": "            gen_log.debug(log_msg)\n", "623": "            return\n", "624": "\n", "625": "        try:\n"}}
{"project": "tornado", "bug": 9, "project_url": "https://github.com/tornadoweb/tornado", "file_changed": "tornado/httputil.py", "buggy_commit_id": "c9d2a3fa573987629ad576e991c2f3b65f4daab4", "fixed_commit_id": "86cc31f52992fb9d11f92de6fd5496842fea2265", "lines_deleted": {}, "lines_added": {"605": "    if args is None:\n", "606": "        return url\n"}}
{"project": "tornado", "bug": 11, "project_url": "https://github.com/tornadoweb/tornado", "file_changed": "tornado/http1connection.py", "buggy_commit_id": "79ef301eb05cac82c075198e502d94dad296f6aa", "fixed_commit_id": "1131c9b50a6a4c0868d0d6fa5e0be077cf8fd1ca", "lines_deleted": {"567": "        if headers.get(\"Transfer-Encoding\") == \"chunked\":\n"}, "lines_added": {"567": "        if headers.get(\"Transfer-Encoding\", \"\").lower() == \"chunked\":\n"}}
{"project": "tornado", "bug": 14, "project_url": "https://github.com/tornadoweb/tornado", "file_changed": "tornado/ioloop.py", "buggy_commit_id": "81ee310adcd905fbdf7c98d9fb6ef0c5a46026c2", "fixed_commit_id": "1d02ed606f1c52636462633d009bdcbaac644331", "lines_deleted": {"251": "            if IOLoop.current(instance=False) is None:\n"}, "lines_added": {"251": "            if IOLoop.current(instance=False) is not None:\n"}}
{"project": "tornado", "bug": 2, "project_url": "https://github.com/tornadoweb/tornado", "file_changed": "tornado/http1connection.py", "buggy_commit_id": "2ca8821d006f6693f920a4b183a3a7c985a5c8ad", "fixed_commit_id": "4f486a4aec746e9d66441600ee3b0743228b061c", "lines_deleted": {"392": "                and \"Transfer-Encoding\" not in headers\n"}, "lines_added": {"392": "                and (\n", "393": "                    \"Transfer-Encoding\" not in headers\n", "394": "                    or headers[\"Transfer-Encoding\"] == \"chunked\"\n", "395": "                )\n"}}
{"project": "tornado", "bug": 3, "project_url": "https://github.com/tornadoweb/tornado", "file_changed": "tornado/httpclient.py", "buggy_commit_id": "940fd87fe9145d1154c8457221f86d56ea063c65", "fixed_commit_id": "aa622e724f80e0f7fcee369f75d69d1db13d72f2", "lines_deleted": {"235": "            if self._instance_cache.get(self.io_loop) is not self:\n", "237": "            del self._instance_cache[self.io_loop]\n"}, "lines_added": {"235": "            cached_val = self._instance_cache.pop(self.io_loop, None)\n", "236": "            # If there's an object other than self in the instance\n", "237": "            # cache for our IOLoop, something has gotten mixed up. A\n", "238": "            # value of None appears to be possible when this is called\n", "239": "            # from a destructor (HTTPClient.__del__) as the weakref\n", "240": "            # gets cleared before the destructor runs.\n", "241": "            if cached_val is not None and cached_val is not self:\n"}}
{"project": "tornado", "bug": 4, "project_url": "https://github.com/tornadoweb/tornado", "file_changed": "tornado/web.py", "buggy_commit_id": "a8420fc681c5423d072978f00eab4d0645057d16", "fixed_commit_id": "db529031a1e1a6e951826aba0b7d0b18f05cd4c7", "lines_deleted": {"2602": "            if (start is not None and start >= size) or end == 0:\n", "2605": "                # content, or when a suffix with length 0 is specified\n", "2610": "            if start is not None and start < 0:\n", "2611": "                start += size\n"}, "lines_added": {"2602": "            if start is not None and start < 0:\n", "2603": "                start += size\n", "2604": "                if start < 0:\n", "2605": "                    start = 0\n", "2606": "            if (\n", "2607": "                start is not None\n", "2608": "                and (start >= size or (end is not None and start >= end))\n", "2609": "            ) or end == 0:\n", "2612": "                # content, or when a suffix with length 0 is specified.\n", "2613": "                # https://tools.ietf.org/html/rfc7233#section-2.1\n", "2614": "                # A byte-range-spec is invalid if the last-byte-pos value is present\n", "2615": "                # and less than the first-byte-pos.\n"}}
{"project": "tornado", "bug": 5, "project_url": "https://github.com/tornadoweb/tornado", "file_changed": "tornado/ioloop.py", "buggy_commit_id": "2d4053daa56c609d642b214399e046671d4a593e", "fixed_commit_id": "886643965b5cb782503d8d7b374b7a794ec2077b", "lines_deleted": {"1220": "            callback_time_sec = self.callback_time / 1000.0\n"}, "lines_added": {"1219": "        callback_time_sec = self.callback_time / 1000.0\n", "1221": "            # The period should be measured from the start of one call\n", "1222": "            # to the start of the next. If one call takes too long,\n", "1223": "            # skip cycles to get back to a multiple of the original\n", "1224": "            # schedule.\n", "1227": "        else:\n", "1228": "            # If the clock moved backwards, ensure we advance the next\n", "1229": "            # timeout instead of recomputing the same value again.\n", "1230": "            # This may result in long gaps between callbacks if the\n", "1231": "            # clock jumps backwards by a lot, but the far more common\n", "1232": "            # scenario is a small NTP adjustment that should just be\n", "1233": "            # ignored.\n", "1234": "            #\n", "1235": "            # Note that on some systems if time.time() runs slower\n", "1236": "            # than time.monotonic() (most common on windows), we\n", "1237": "            # effectively experience a small backwards time jump on\n", "1238": "            # every iteration because PeriodicCallback uses\n", "1239": "            # time.time() while asyncio schedules callbacks using\n", "1240": "            # time.monotonic().\n", "1241": "            # https://github.com/tornadoweb/tornado/issues/2333\n", "1242": "            self._next_timeout += callback_time_sec\n"}}
{"project": "tornado", "bug": 8, "project_url": "https://github.com/tornadoweb/tornado", "file_changed": "tornado/websocket.py", "buggy_commit_id": "34c43f4775971ab9b2b8ed43356f218add6387b2", "fixed_commit_id": "5d4a9ab26372efd255bbb29fde55c41395ed17b1", "lines_deleted": {}, "lines_added": {"618": "        except ValueError:\n", "619": "            self.handler.set_status(400)\n", "620": "            log_msg = \"Missing/Invalid WebSocket headers\"\n", "621": "            self.handler.finish(log_msg)\n", "622": "            gen_log.debug(log_msg)\n", "623": "            return\n", "624": "\n", "625": "        try:\n"}}
{"project": "tornado", "bug": 9, "project_url": "https://github.com/tornadoweb/tornado", "file_changed": "tornado/httputil.py", "buggy_commit_id": "c9d2a3fa573987629ad576e991c2f3b65f4daab4", "fixed_commit_id": "86cc31f52992fb9d11f92de6fd5496842fea2265", "lines_deleted": {}, "lines_added": {"605": "    if args is None:\n", "606": "        return url\n"}}
{"project": "tornado", "bug": 11, "project_url": "https://github.com/tornadoweb/tornado", "file_changed": "tornado/http1connection.py", "buggy_commit_id": "79ef301eb05cac82c075198e502d94dad296f6aa", "fixed_commit_id": "1131c9b50a6a4c0868d0d6fa5e0be077cf8fd1ca", "lines_deleted": {"567": "        if headers.get(\"Transfer-Encoding\") == \"chunked\":\n"}, "lines_added": {"567": "        if headers.get(\"Transfer-Encoding\", \"\").lower() == \"chunked\":\n"}}
{"project": "tornado", "bug": 14, "project_url": "https://github.com/tornadoweb/tornado", "file_changed": "tornado/ioloop.py", "buggy_commit_id": "81ee310adcd905fbdf7c98d9fb6ef0c5a46026c2", "fixed_commit_id": "1d02ed606f1c52636462633d009bdcbaac644331", "lines_deleted": {"251": "            if IOLoop.current(instance=False) is None:\n"}, "lines_added": {"251": "            if IOLoop.current(instance=False) is not None:\n"}}
